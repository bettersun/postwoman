(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{229:function(e,t,n){"use strict";t.a={name:"textareaAutoHeight",update:function(e){var t=e.scrollHeight,n=e.clientHeight,style=e.style;t!==n&&(style.minHeight="".concat(t,"px"))}}},238:function(e,t,n){var content=n(668);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(43).default)("c6bce6fe",content,!0,{sourceMap:!1})},256:function(e,t,n){"use strict";n(28),n(15),n(10),n(7),n(21);var o=n(9),r=n(257),c=n.n(r);n(259);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var d={props:{value:{type:String,default:""},theme:{type:String,required:!1},lang:{type:String,default:"json"},options:{type:Object,default:{}}},data:function(){return{editor:null,cacheValue:""}},watch:{value:function(e){e!==this.cacheValue&&(this.editor.session.setValue(e,1),this.cacheValue=e)},theme:function(){this.editor.setTheme("ace/theme/"+this.defineTheme())},lang:function(e){this.editor.getSession().setMode("ace/mode/"+e)},options:function(e){this.editor.setOptions(e)}},mounted:function(){var e=c.a.edit(this.$refs.editor,function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({theme:"ace/theme/"+this.defineTheme(),mode:"ace/mode/"+this.lang},this.options));e.setValue(this.value),this.editor=e,this.cacheValue=this.value},methods:{defineTheme:function(){return this.theme?this.theme:this.$store.state.postwoman.settings.THEME_ACE_EDITOR||"dracula"}},beforeDestroy:function(){this.editor.destroy(),this.editor.container.remove()}},h=n(33),component=Object(h.a)(d,(function(){var e=this.$createElement;return(this._self._c||e)("pre",{ref:"editor"})}),[],!1,null,null,null);t.a=component.exports},667:function(e,t,n){"use strict";var o=n(238);n.n(o).a},668:function(e,t,n){(e.exports=n(42)(!1)).push([e.i,".tab[data-v-9fe08b9a]{max-height:calc(100vh - 186px);overflow:auto}",""])},719:function(e,t,n){"use strict";n.r(t);n(28),n(15),n(10),n(7),n(21),n(44),n(34),n(56),n(131),n(27);var o=n(9),r=(n(13),n(3)),c=n(55),l=n.n(c),d=n(714),h=n(717),m=n(739),v=n(217),f=n(229),y=n(256);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x,C,S={directives:{textareaAutoHeight:f.a},components:{"pw-section":function(){return n.e(1).then(n.bind(null,263))},"gql-field":function(){return n.e(10).then(n.bind(null,723))},"gql-type":function(){return n.e(25).then(n.bind(null,724))},Editor:y.a},data:function(){return{schemaString:"",queryFields:[],mutationFields:[],subscriptionFields:[],gqlTypes:[],responseString:"",copyButton:'<i class="material-icons">file_copy</i>',downloadButton:'<i class="material-icons">get_app</i>',doneButton:'<i class="material-icons">done</i>',expandResponse:!1,responseBodyMaxLines:16}},computed:{url:{get:function(){return this.$store.state.gql.url},set:function(e){this.$store.commit("setGQLState",{value:e,attribute:"url"})}},headers:{get:function(){return this.$store.state.gql.headers},set:function(e){this.$store.commit("setGQLState",{value:e,attribute:"headers"})}},gqlQueryString:{get:function(){return this.$store.state.gql.query},set:function(e){this.$store.commit("setGQLState",{value:e,attribute:"query"})}},headerString:function(){var e=this.headers.filter((function(e){return!!e.key})).map((function(e){var t=e.key,n=e.value;return"".concat(t,": ").concat(n)})).join(",\n");return""===e?"":"".concat(e)}},methods:{copySchema:function(){var e=this;this.$refs.copySchemaCode.innerHTML=this.doneButton;var t=document.createElement("textarea");t.innerText=this.schemaString,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.$toast.success("复制到剪贴板",{icon:"done"}),setTimeout((function(){return e.$refs.copySchemaCode.innerHTML=e.copyButton}),1e3)},copyQuery:function(){var e=this;this.$refs.copyQueryButton.innerHTML=this.doneButton;var t=document.createElement("textarea");t.innerText=this.gqlQueryString,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.$toast.success("复制到剪贴板",{icon:"done"}),setTimeout((function(){return e.$refs.copyQueryButton.innerHTML=e.copyButton}),1e3)},copyResponse:function(){var e=this;this.$refs.copyResponseButton.innerHTML=this.doneButton;var t=document.createElement("textarea");t.innerText=this.responseString,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.$toast.success("复制到剪贴板",{icon:"done"}),setTimeout((function(){return e.$refs.copyResponseButton.innerHTML=e.copyButton}),1e3)},runQuery:(C=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,o,r,c,data,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),this.$nuxt.$loading.start(),e.prev=2,n={},this.headers.forEach((function(header){n[header.key]=header.value})),o={method:"post",url:this.url,headers:w({},n,{"content-type":"application/json"}),data:JSON.stringify({query:this.gqlQueryString})},r=this.$store.state.postwoman.settings.PROXY_ENABLED?{method:"post",url:this.$store.state.postwoman.settings.PROXY_URL||"https://postwoman.apollotv.xyz/",data:o}:o,e.next=9,l()(r);case 9:c=e.sent,data=this.$store.state.postwoman.settings.PROXY_ENABLED?c.data:c,this.responseString=JSON.stringify(data.data,null,2),this.$nuxt.$loading.finish(),d=Date.now()-t,this.$toast.info("完成时间 ".concat(d,"ms"),{icon:"done"}),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(2),this.$nuxt.$loading.finish(),this.$toast.error(e.t0+" (F12查看详情)",{icon:"error"}),console.log("Error",e.t0);case 22:case"end":return e.stop()}}),e,this,[[2,17]])}))),function(){return C.apply(this,arguments)}),getSchema:(x=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,o,r,c,f,data,y,_,x,C,S,O,$,k,T,R,L,E,j,P,B,F,Q;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),this.schemaString="Loading...",this.$nuxt.$loading.start(),e.prev=3,n=JSON.stringify({query:d.a()}),o={},this.headers.forEach((function(header){o[header.key]=header.value})),r={method:"post",url:this.url,headers:w({},o,{"content-type":"application/json"}),data:n},c=this.$store.state.postwoman.settings.PROXY_ENABLED?{method:"post",url:this.$store.state.postwoman.settings.PROXY_URL||"https://postwoman.apollotv.xyz/",data:r}:r,e.next=11,l()(c);case 11:if(f=e.sent,data=this.$store.state.postwoman.settings.PROXY_ENABLED?f.data:f,y=h.a(data.data.data),this.schemaString=m.a(y,{commentDescriptions:!0}),y.getQueryType()){for(C in _=y.getQueryType().getFields(),x=[],_)x.push(_[C]);this.queryFields=x}if(y.getMutationType()){for($ in S=y.getMutationType().getFields(),O=[],S)O.push(S[$]);this.mutationFields=O}if(y.getSubscriptionType()){for(R in k=y.getSubscriptionType().getFields(),T=[],k)T.push(k[R]);this.subscriptionFields=T}for(F in L=y.getTypeMap(),E=[],j=y.getQueryType()?y.getQueryType().name:"",P=y.getMutationType()?y.getMutationType().name:"",B=y.getSubscriptionType()?y.getSubscriptionType().name:"",L)!L[F].name.startsWith("__")&&![j,P,B].includes(L[F].name)&&L[F]instanceof v.f&&E.push(L[F]);this.gqlTypes=E,this.$nuxt.$loading.finish(),Q=Date.now()-t,this.$toast.info("完成时间 ".concat(Q,"ms"),{icon:"done"}),e.next=36;break;case 30:e.prev=30,e.t0=e.catch(3),this.$nuxt.$loading.finish(),this.schemaString=e.t0+". 检查控制器详情.",this.$toast.error(e.t0+" (F12查看详情)",{icon:"error"}),console.log("Error",e.t0);case 36:case"end":return e.stop()}}),e,this,[[3,30]])}))),function(){return x.apply(this,arguments)}),ToggleExpandResponse:function(){this.expandResponse=!this.expandResponse,this.responseBodyMaxLines=this.responseBodyMaxLines==1/0?16:1/0},downloadResponse:function(){var e=this,t=JSON.stringify(this.schemaString,null,2),n=new Blob([t],{type:"application/json"}),a=document.createElement("a"),o=URL.createObjectURL(n);a.href=o,a.download=(this.url+" on "+Date()+".graphql").replace(/\./g,"[dot]"),document.body.appendChild(a),a.click(),this.$refs.downloadResponse.innerHTML=this.doneButton,this.$toast.success("下载开始",{icon:"done"}),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(o),e.$refs.downloadResponse.innerHTML=e.downloadButton}),1e3)},addRequestHeader:function(e){return this.$store.commit("addGQLHeader",{key:"",value:""}),!1},removeRequestHeader:function(e){var t=this,n=this.headers.slice();this.$store.commit("removeGQLHeader",e),this.$toast.error("Deleted",{icon:"delete",action:{text:"Undo",duration:4e3,onClick:function(e,o){t.headers=n,o.remove()}}}),console.log(n)}}},O=(n(667),n(33)),component=Object(O.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"content"},[n("div",{staticClass:"page-columns inner-left"},[n("pw-section",{ref:"endpoint",staticClass:"blue",attrs:{label:"端点"}},[n("ul",[n("li",[n("label",{attrs:{for:"url"}},[e._v("URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],attrs:{id:"url",type:"url"},domProps:{value:e.url},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSchema()},input:function(t){t.target.composing||(e.url=t.target.value)}}})]),e._v(" "),n("div",[n("li",[n("label",{staticClass:"hide-on-small-screen",attrs:{for:"get"}},[e._v(" ")]),e._v(" "),n("button",{attrs:{id:"get",name:"get"},on:{click:e.getSchema}},[e._v("\n                请求模式\n                "),n("span",[n("i",{staticClass:"material-icons"},[e._v("send")])])])])])])]),e._v(" "),n("pw-section",{ref:"headers",staticClass:"orange",attrs:{label:"Headers"}},[n("ul",[n("li",[n("div",{staticClass:"flex-wrap"},[n("label",{attrs:{for:"headerList"}},[e._v("头部列表")]),e._v(" "),n("div",[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"清除",expression:"'清除'",modifiers:{bottom:!0}}],staticClass:"icon",on:{click:function(t){e.headers=[]}}},[n("i",{staticClass:"material-icons"},[e._v("clear_all")])])])]),e._v(" "),n("textarea",{directives:[{name:"textarea-auto-height",rawName:"v-textarea-auto-height",value:e.headerString,expression:"headerString"},{name:"model",rawName:"v-model",value:e.headerString,expression:"headerString"}],attrs:{id:"headerList",readonly:"",placeholder:"(至少添加一个头部)",rows:"1"},domProps:{value:e.headerString},on:{input:function(t){t.target.composing||(e.headerString=t.target.value)}}})])]),e._v(" "),e._l(e.headers,(function(header,t){return n("ul",{key:t},[n("li",[n("input",{attrs:{placeholder:"header "+(t+1),name:"header"+t,autofocus:""},domProps:{value:header.key},on:{change:function(n){return e.$store.commit("setGQLHeaderKey",{index:t,value:n.target.value})}}})]),e._v(" "),n("li",[n("input",{attrs:{placeholder:"value "+(t+1),name:"value"+t,autofocus:""},domProps:{value:header.value},on:{change:function(n){return e.$store.commit("setGQLHeaderValue",{index:t,value:n.target.value})}}})]),e._v(" "),n("div",[n("li",[n("button",{staticClass:"icon",attrs:{id:"header"},on:{click:function(n){return e.removeRequestHeader(t)}}},[n("i",{staticClass:"material-icons"},[e._v("delete")])])])])])})),e._v(" "),n("ul",[n("li",[n("button",{staticClass:"icon",on:{click:e.addRequestHeader}},[n("i",{staticClass:"material-icons"},[e._v("add")]),e._v(" "),n("span",[e._v("添加")])])])])],2),e._v(" "),n("pw-section",{ref:"schema",staticClass:"green",attrs:{label:"模式"}},[n("div",{staticClass:"flex-wrap"},[n("label",[e._v("请求")]),e._v(" "),n("div",[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.expandResponse?"崩溃的反应":"扩大反应"},expression:"{\n                content: !expandResponse\n                  ? '扩大反应'\n                  : '崩溃的反应'\n              }"}],ref:"ToggleExpandResponse",staticClass:"icon",on:{click:e.ToggleExpandResponse}},[e.expandResponse?n("i",{staticClass:"material-icons"},[e._v("unfold_less")]):n("i",{staticClass:"material-icons"},[e._v("unfold_more")])]),e._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"下载文件",expression:"'下载文件'"}],ref:"downloadResponse",staticClass:"icon",on:{click:e.downloadResponse}},[n("i",{staticClass:"material-icons"},[e._v("get_app")])]),e._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"复制模式",expression:"'复制模式'"}],ref:"copySchemaCode",staticClass:"icon",on:{click:e.copySchema}},[n("i",{staticClass:"material-icons"},[e._v("file_copy")])])])]),e._v(" "),n("Editor",{attrs:{value:e.schemaString,lang:"graphqlschema",options:{maxLines:e.responseBodyMaxLines,minLines:"16",fontSize:"16px",autoScrollEditorIntoView:!0,readOnly:!0,showPrintMargin:!1,useWorker:!1}}})],1),e._v(" "),n("pw-section",{ref:"query",staticClass:"cyan",attrs:{label:"查询"}},[n("div",{staticClass:"flex-wrap"},[n("label",{attrs:{for:"gqlQuery"}},[e._v("查询")]),e._v(" "),n("div",[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"运行查询",expression:"'运行查询'",modifiers:{bottom:!0}}],staticClass:"icon",on:{click:function(t){return e.runQuery()}}},[n("i",{staticClass:"material-icons"},[e._v("play_arrow")])]),e._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"复制查询",expression:"'复制查询'"}],ref:"copyQueryButton",staticClass:"icon",on:{click:e.copyQuery}},[n("i",{staticClass:"material-icons"},[e._v("file_copy")])])])]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.gqlQueryString,expression:"gqlQueryString"}],attrs:{id:"gqlQuery",rows:"8"},domProps:{value:e.gqlQueryString},on:{input:function(t){t.target.composing||(e.gqlQueryString=t.target.value)}}},[e._v("        >")])]),e._v(" "),n("pw-section",{ref:"response",staticClass:"purple",attrs:{label:"请求"}},[n("div",{staticClass:"flex-wrap"},[n("label",{attrs:{for:"responseField"}},[e._v("请求")]),e._v(" "),n("div",[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"复制请求",expression:"'复制请求'"}],ref:"copyResponseButton",staticClass:"icon",on:{click:e.copyResponse}},[n("i",{staticClass:"material-icons"},[e._v("file_copy")])])])]),e._v(" "),n("Editor",{attrs:{value:e.responseString,lang:"json",options:{maxLines:e.responseBodyMaxLines,minLines:"16",fontSize:"16px",autoScrollEditorIntoView:!0,readOnly:!0,showPrintMargin:!1,useWorker:!1}}})],1)],1),e._v(" "),n("aside",{staticClass:"sticky-inner inner-right"},[n("pw-section",{ref:"docs",staticClass:"purple",attrs:{label:"文档"}},[n("section",[e.queryFields.length>0?n("input",{attrs:{id:"queries-tab",type:"radio",name:"side",checked:"checked"}}):e._e(),e._v(" "),e.queryFields.length>0?n("label",{attrs:{for:"queries-tab"}},[e._v("查询")]):e._e(),e._v(" "),e.queryFields.length>0?n("div",{staticClass:"tab"},e._l(e.queryFields,(function(e){return n("div",{key:e.name},[n("gql-field",{attrs:{gqlField:e}})],1)})),0):e._e(),e._v(" "),e.mutationFields.length>0?n("input",{attrs:{id:"mutations-tab",type:"radio",name:"side",checked:"checked"}}):e._e(),e._v(" "),e.mutationFields.length>0?n("label",{attrs:{for:"mutations-tab"}},[e._v("突变")]):e._e(),e._v(" "),e.mutationFields.length>0?n("div",{staticClass:"tab"},e._l(e.mutationFields,(function(e){return n("div",{key:e.name},[n("gql-field",{attrs:{gqlField:e}})],1)})),0):e._e(),e._v(" "),e.subscriptionFields.length>0?n("input",{attrs:{id:"subscriptions-tab",type:"radio",name:"side",checked:"checked"}}):e._e(),e._v(" "),e.subscriptionFields.length>0?n("label",{attrs:{for:"subscriptions-tab"}},[e._v("订阅")]):e._e(),e._v(" "),e.subscriptionFields.length>0?n("div",{staticClass:"tab"},e._l(e.subscriptionFields,(function(e){return n("div",{key:e.name},[n("gql-field",{attrs:{gqlField:e}})],1)})),0):e._e(),e._v(" "),e.gqlTypes.length>0?n("input",{attrs:{id:"gqltypes-tab",type:"radio",name:"side",checked:"checked"}}):e._e(),e._v(" "),e.gqlTypes.length>0?n("label",{attrs:{for:"gqltypes-tab"}},[e._v("类型")]):e._e(),e._v(" "),e.gqlTypes.length>0?n("div",{staticClass:"tab"},e._l(e.gqlTypes,(function(e){return n("div",{key:e.name},[n("gql-type",{attrs:{gqlType:e}})],1)})),0):e._e()])])],1)])])}),[],!1,null,"9fe08b9a",null);t.default=component.exports}}]);